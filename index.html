<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issiqxona Plyonkasi Do'koni</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script>
    // Firebase konfiguratsiya
    const firebaseConfig = {
        apiKey: "AIzaSyA9135j...",
        authDomain: "chat-ff9c7.firebaseapp.com",
        databaseURL: "https://chat-ff9c7-default-rtdb.firebaseio.com",
        projectId: "chat-ff9c7",
        storageBucket: "chat-ff9c7.firebasestorage.app",
        messagingSenderId: "261792238950",
        appId: "1:261792238950:web:d9302bbeb00272b66fcca7",
        measurementId: "G-YYGJVYMEMR"
    };

    // Firebase ilovasini ishga tushirish
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    </script>
</head>
<body>
    <div class="container">
        <header>
            <input type="text" id="search-box" onkeyup="searchProducts()">
            <label for="search-box">
                <i id="search-icon" class='bx bx-search'></i>
            </label>
            <a class="admin" href="admin.html">A</a>
        </header>
        <div class="space"></div>
        <section id="type-of-product">
            <a href="#uzb">
                <div class="pilyonka">
                    <img src="img/uzb.jfif" alt="img">
                    <p>Uzbekistan</p>
                </div>
            </a>
            <a href="#korea">
                <div class="pilyonka">
                    <img src="img/korea.jfif" alt="img">
                    <p>Korea</p>
                </div>
            </a>
            <a href="#">
                <div class="pilyonka">
                    <img src="img/china.jfif" alt="img">
                    <p>China</p>
                </div>
            </a>
            <a href="#">
                <div class="pilyonka">
                    <img src="img/fl.jfif" alt="img">
                    <p>Floral</p>
                </div>
            </a>
            <a href="#">
                <div class="pilyonka">
                    <img src="img/kk.jpg" alt="img">
                    <p>Other</p>
                </div>
            </a>
        </section>
        <h2 id="uzb">Uzbekistan</h2>
        <section id="products">
            <div class="product">
                <img src="img/kl.jpg" alt="Mahsulot 1">
                <h3>Mahsulot 1</h3>
                <p class="tafsilot">Issiqxona plyonkasi, yuqori sifat</p>
                <input type="number" id="meter-1" min="1" value="1" onchange="updatePrice(1, 5000)">
                <p class="narx"><span>5000</span> so'm har metri</p>
                <p class="jami">Jami narx: <span id="total-1">5000</span> so'm</p>
                <button onclick="addToCart(1, 'Mahsulot 1', 5000)">Sotib olish</button>
            </div>
            <div class="product">
                <img src="img/kl.jpg" alt="Mahsulot 2">
                <h3>Mahsulot 2</h3>
                <p class="tafsilot">UV himoyali plyonka</p>
                <input type="number" id="meter-2" min="1" value="1" onchange="updatePrice(2, 7000)">
                <p class="narx"><span>7000</span> so'm har metri</p>
                <p class="jami">Jami narx: <span id="total-2">7000</span> so'm</p>
                <button onclick="addToCart(2, 'Mahsulot 2', 7000)">Sotib olish</button>
            </div>
            <div class="product">
                <img src="img/kl.jpg" alt="Mahsulot 3">
                <h3>Mahsulot 3</h3>
                <p class="tafsilot">Himoyali plyonka</p>
                <input type="number" id="meter-3" min="1" value="1" onchange="updatePrice(3, 9000)">
                <p class="narx"><span>9000</span> so'm har metri</p>
                <p class="jami">Jami narx: <span id="total-3">9000</span> so'm</p>
                <button onclick="addToCart(3, 'Mahsulot 3', 9000)">Sotib olish</button>
            </div>
        </section>

        <h2 id="korea">Korea</h2>
        <section id="products">
            <div class="product">
                <img src="img/kl.jpg" alt="Mahsulot 1">
                <h3>Mahsulot 4</h3>
                <p class="tafsilot">Issiqxona plyonkasi, yuqori sifat</p>
                <input type="number" id="meter-4" min="1" value="1" onchange="updatePrice(4, 4000)">
                <p class="narx"><span>4000</span> so'm har metri</p>
                <p class="jami">Jami narx: <span id="total-4">4000</span> so'm</p>
                <button onclick="addToCart(4, 'Mahsulot 4', 4000)">Sotib olish</button>
            </div>
            <div class="product">
                <img src="img/kl.jpg" alt="Mahsulot 5">
                <h3>Mahsulot 5</h3>
                <p class="tafsilot">UV himoyali plyonka</p>
                <input type="number" id="meter-5" min="1" value="1" onchange="updatePrice(5, 5000)">
                <p class="narx"><span>5000</span> so'm har metri</p>
                <p class="jami">Jami narx: <span id="total-5">5000</span> so'm</p>
                <button onclick="addToCart(5, 'Mahsulot 5', 5000)">Sotib olish</button>
            </div>
            <div class="product">
                <img src="img/kl.jpg" alt="Mahsulot 6">
                <h3>Mahsulot 6</h3>
                <p class="tafsilot">Himoyali plyonka</p>
                <input type="number" id="meter-6" min="1" value="1" onchange="updatePrice(6, 8000)">
                <p class="narx"><span>8000</span> so'm har metri</p>
                <p class="jami">Jami narx: <span id="total-6">8000</span> so'm</p>
                <button onclick="addToCart(6, 'Mahsulot 6', 8000)">Sotib olish</button>
            </div>
        </section>

        <div class="space2"></div>
        
        <section id="cart">
            <i id="cart-icon" class='bx bx-cart'></i>
            <ul id="cart-items"></ul>
            <button id="order-btn">Buyurtma Berish</button>
        </section>
    </div>





    
    <script>
        let cart = [];

        function updatePrice(id, price) {
            let meters = document.getElementById(`meter-${id}`).value;
            document.getElementById(`total-${id}`).innerText = meters * price;
        }

        function addToCart(id, name, price) {
            let meters = document.getElementById(`meter-${id}`).value;
            let totalPrice = meters * price;
            cart.push({ id, name, meters, totalPrice });
            updateCart();
        }
        
        function updateCart() {
            const cartList = document.getElementById('cart-items');
            cartList.innerHTML = '';
            cart.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `${item.name} - ${item.meters} metr - ${item.totalPrice} so'm <button onclick="removeFromCart(${index})">O'chirish</button>`;
                cartList.appendChild(li);
            });
        }
        
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        document.getElementById('order-btn').addEventListener('click', () => {
            if (cart.length === 0) {
                alert("Savatcha bo'sh!");
                return;
            }
            const order = {
                items: cart,
                date: new Date().toISOString()
            };
            db.ref('orders').push(order)
                .then(() => {
                    alert('Buyurtmangiz qabul qilindi!');
                    cart = [];
                    updateCart();
                })
                .catch(error => console.error("Buyurtma yuborishda xatolik:", error));
        });
        function searchProducts() {
        let input = document.getElementById('search-box').value.toLowerCase(); // Kiritilgan matn
        let products = document.getElementsByClassName('product'); // Barcha mahsulotlar

        for (let i = 0; i < products.length; i++) {
            let productName = products[i].getElementsByTagName('h3')[0].innerText.toLowerCase(); // Mahsulot nomi
            if (productName.includes(input)) {
                products[i].style.display = "block"; // Agar mos kelsa, koâ€˜rsatamiz
            } else {
                products[i].style.display = "none"; // Mos kelmasa, yashiramiz
            }
        }
    }
    </script>
</body>
</html>
